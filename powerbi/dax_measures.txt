# DAX Measures for Omnistal v1.5 Power BI Dashboard

## Key Metrics

### Total Employees
Total Employees = COUNTROWS(employees)

### Attrition Rate
Attrition Rate = 
DIVIDE(
    CALCULATE(COUNTROWS(employees), employees[Attrition] = 1),
    COUNTROWS(employees),
    0
) * 100

### Average Monthly Income
Avg Monthly Income = AVERAGE(employees[MonthlyIncome])

### Average Tenure
Avg Tenure = AVERAGE(employees[YearsAtCompany])

---

## Risk Metrics

### High Risk Count
High Risk Count = 
CALCULATE(
    COUNTROWS(employees),
    employees[RiskLevel] = "HIGH"
)

### Average Risk Score
Avg Risk Score = AVERAGE(employees[RiskScore])

### Risk Score by Department
Risk by Dept = 
CALCULATE(
    AVERAGE(employees[RiskScore]),
    ALLEXCEPT(employees, employees[Department])
)

---

## Financial Metrics

### Replacement Cost
Replacement Cost = 
employees[MonthlyIncome] * 12 * 1.5

### Total Potential Cost
Total Risk Cost = 
SUMX(
    FILTER(employees, employees[RiskLevel] = "HIGH"),
    employees[MonthlyIncome] * 12 * 1.5
)

### Projected Savings (if 50% retention)
Projected Savings = [Total Risk Cost] * 0.5

---

## Time Intelligence

### YTD Attrition
YTD Attrition = 
CALCULATE(
    [Attrition Rate],
    DATESYTD('Date'[Date])
)

### Previous Month Attrition
PM Attrition = 
CALCULATE(
    [Attrition Rate],
    PREVIOUSMONTH('Date'[Date])
)

---

## Conditional Formatting

### Risk Color
Risk Color = 
SWITCH(
    TRUE(),
    employees[RiskScore] >= 70, "Red",
    employees[RiskScore] >= 40, "Orange",
    "Green"
)

### Performance Color
Performance Color = 
SWITCH(
    employees[PerformanceRating],
    4, "Excellent",
    3, "Good",
    "Needs Improvement"
)

---

## Advanced Analytics

### Attrition by Tenure Band
Tenure Band = 
SWITCH(
    TRUE(),
    employees[YearsAtCompany] < 2, "0-2 years",
    employees[YearsAtCompany] < 5, "2-5 years",
    employees[YearsAtCompany] < 10, "5-10 years",
    "10+ years"
)

### Salary vs Market
Salary Status = 
VAR MarketRate = CALCULATE(AVERAGE(employees[MonthlyIncome]))
RETURN
    IF(
        employees[MonthlyIncome] < MarketRate * 0.85,
        "Below Market",
        IF(
            employees[MonthlyIncome] > MarketRate * 1.15,
            "Above Market",
            "At Market"
        )
    )

---

## Filters

### Date Range
Selected Period = 
IF(
    ISFILTERED('Date'[Date]),
    "Custom Range",
    "All Time"
)

---

## Usage Notes

1. Create these measures in Power BI Desktop
2. Apply to appropriate visuals in dashboard
3. Use bookmarks for different views
4. Consider creating calculated columns for static values

For more Power BI tips, see Microsoft documentation:
https://docs.microsoft.com/power-bi/
